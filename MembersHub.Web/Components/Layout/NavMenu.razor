@using MudBlazor
@using Microsoft.AspNetCore.Components.Authorization

<style>
    /* Mobile-friendly navigation styles */
    .cashier-quick-access {
        background: linear-gradient(135deg, var(--mud-palette-success), var(--mud-palette-success-lighten));
        border-radius: 8px;
        margin: 8px;
        padding: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .cashier-quick-access .mud-nav-link {
        border-radius: 6px;
        margin: 4px 0;
        background-color: rgba(255, 255, 255, 0.15);
        color: white !important;
        font-weight: 500;
    }

    .cashier-quick-access .mud-nav-link:hover {
        background-color: rgba(255, 255, 255, 0.25);
        transform: translateY(-1px);
        transition: all 0.2s ease;
    }

    .quick-access-title {
        color: white !important;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    /* Improved mobile spacing */
    .mud-nav-group {
        margin-bottom: 4px;
    }

    .mud-nav-group .mud-nav-group-header {
        min-height: 40px;
        padding: 8px 16px;
    }

    .mud-nav-link {
        min-height: 40px;
        padding: 8px 16px;
    }
</style>

<AuthorizeView>
    <Authorized>
        <!-- Quick Access for Cashiers -->
        <div class="cashier-quick-access">
            <MudText Typo="Typo.subtitle2" Class="mb-3 quick-access-title">
                <MudIcon Icon="@Icons.Material.Filled.Speed" Size="Size.Small" Class="mr-1" />
                Γρήγορη Πρόσβαση
            </MudText>
            <MudNavLink Href="/payments/new" Icon="@Icons.Material.Filled.AddCard">
                🚀 Νέα Πληρωμή
            </MudNavLink>
            <MudNavLink Href="/financial/payments" Icon="@Icons.Material.Filled.Payment">
                💰 Πληρωμές Σήμερα
            </MudNavLink>
            <MudNavLink Href="/members" Icon="@Icons.Material.Filled.Search">
                🔍 Αναζήτηση Μέλους
            </MudNavLink>
        </div>

        <MudDivider Class="my-3" />

        <MudNavMenu>
            <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">
                Αρχική
            </MudNavLink>
            
            <MudNavLink Href="/members" Icon="@Icons.Material.Filled.People">
                Μέλη
            </MudNavLink>

            <!-- Financial Section -->
            <MudNavGroup Expanded="false" MaxHeight="300">
                <TitleContent>
                    <div style="display: flex; align-items: center;">
                        <MudIcon Icon="@Icons.Material.Filled.AccountBalance" Style="margin-right: 8px;" />
                        <MudText>Οικονομικά</MudText>
                    </div>
                </TitleContent>
                <ChildContent>
                    <MudNavLink Href="/financial/dashboard" Icon="@Icons.Material.Filled.Dashboard">
                        Dashboard
                    </MudNavLink>
                    <MudNavLink Href="/financial/payments" Icon="@Icons.Material.Filled.Payment">
                        Πληρωμές
                    </MudNavLink>
                    <MudNavLink Href="/payments/new" Icon="@Icons.Material.Filled.AddCard">
                        Νέα Πληρωμή
                    </MudNavLink>
                    <MudNavLink Href="/financial/subscriptions" Icon="@Icons.Material.Filled.CalendarMonth">
                        Συνδρομές
                    </MudNavLink>
                    <AuthorizeView Roles="Admin,Owner" Context="membershipTypeContext">
                        <MudNavLink Href="/financial/membership-types" Icon="@Icons.Material.Filled.Category">
                            Τύποι Συνδρομής
                        </MudNavLink>
                    </AuthorizeView>
                    <MudNavLink Href="/financial/invoices" Icon="@Icons.Material.Filled.Receipt">
                        Τιμολόγια
                    </MudNavLink>
                    <MudNavLink Href="/financial/expenses" Icon="@Icons.Material.Filled.ShoppingCart">
                        Έξοδα
                    </MudNavLink>
                    <MudNavLink Href="/financial/reports" Icon="@Icons.Material.Filled.Assessment">
                        Αναφορές
                    </MudNavLink>
                </ChildContent>
            </MudNavGroup>

            <!-- Security Section -->
            <MudNavGroup Expanded="false" MaxHeight="200">
                <TitleContent>
                    <div style="display: flex; align-items: center;">
                        <MudIcon Icon="@Icons.Material.Filled.Security" Style="margin-right: 8px;" />
                        <MudText>Ασφάλεια</MudText>
                    </div>
                </TitleContent>
                <ChildContent>
                    <MudNavLink Href="/security/devices" Icon="@Icons.Material.Filled.Devices">
                        Συσκευές μου
                    </MudNavLink>
                    <MudNavLink Href="/security/notifications" Icon="@Icons.Material.Filled.Notifications">
                        Ειδοποιήσεις Ασφαλείας
                    </MudNavLink>
                </ChildContent>
            </MudNavGroup>
            
            <AuthorizeView Roles="Admin,Owner" Context="adminContext">
                <Authorized>
                    <!-- Admin Navigation Group -->
                    <MudNavGroup Expanded="false" MaxHeight="250">
                        <TitleContent>
                            <div style="display: flex; align-items: center;">
                                <MudIcon Icon="@Icons.Material.Filled.AdminPanelSettings" Style="margin-right: 8px;" />
                                <MudText>Διαχείριση</MudText>
                            </div>
                        </TitleContent>
                        <ChildContent>
                            <MudNavLink Href="/users" Icon="@Icons.Material.Filled.People">
                                Χρήστες
                            </MudNavLink>
                            <MudNavLink Href="/audit-logs" Icon="@Icons.Material.Filled.History">
                                Ιστορικό
                            </MudNavLink>
                            <MudNavLink Href="/email-settings" Icon="@Icons.Material.Filled.Email">
                                Ρυθμίσεις Email
                            </MudNavLink>
                            <MudNavLink Href="/test-password-reset" Icon="@Icons.Material.Filled.BugReport">
                                Δοκιμή Password Reset
                            </MudNavLink>
                        </ChildContent>
                    </MudNavGroup>
                    
                    <!-- Admin Security Group -->
                    <MudNavGroup Expanded="false" MaxHeight="150">
                        <TitleContent>
                            <div style="display: flex; align-items: center;">
                                <MudIcon Icon="@Icons.Material.Filled.Shield" Style="margin-right: 8px;" />
                                <MudText>Ασφάλεια Admin</MudText>
                            </div>
                        </TitleContent>
                        <ChildContent>
                            <MudNavLink Href="/security/dashboard" Icon="@Icons.Material.Filled.Dashboard">
                                Security Dashboard
                            </MudNavLink>
                            <MudNavLink Href="/admin/security" Icon="@Icons.Material.Filled.Security">
                                Admin Security Panel
                            </MudNavLink>
                        </ChildContent>
                    </MudNavGroup>
                </Authorized>
            </AuthorizeView>
        </MudNavMenu>
    </Authorized>
    <NotAuthorized>
        <MudNavMenu>
            <MudNavLink Href="/login" Icon="@Icons.Material.Filled.Login">
                Είσοδος
            </MudNavLink>
        </MudNavMenu>
    </NotAuthorized>
</AuthorizeView>

