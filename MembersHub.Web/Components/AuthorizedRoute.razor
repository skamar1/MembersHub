@using Microsoft.AspNetCore.Components.Authorization
@using MembersHub.Core.Entities
@using MembersHub.Core.Interfaces

<AuthorizeView Roles="@AllowedRoles">
    <Authorized>
        @ChildContent
    </Authorized>
    <NotAuthorized>
        @if (context.User.Identity?.IsAuthenticated == true)
        {
            <MudContainer MaxWidth="MaxWidth.Medium" Class="mt-8">
                <MudAlert Severity="Severity.Warning" Variant="Variant.Filled">
                    <MudText Typo="Typo.h6">Πρόσβαση Απορρίφθηκε</MudText>
                    <MudText>Δεν έχετε τα απαραίτητα δικαιώματα για να δείτε αυτή τη σελίδα.</MudText>
                    <MudText Class="mt-2">Απαιτούμενοι ρόλοι: @AllowedRoles</MudText>
                </MudAlert>
            </MudContainer>
        }
        else
        {
            <RedirectToLogin />
        }
    </NotAuthorized>
</AuthorizeView>

@code {
    [Parameter] public RenderFragment ChildContent { get; set; } = null!;
    [Parameter] public string AllowedRoles { get; set; } = "";
}